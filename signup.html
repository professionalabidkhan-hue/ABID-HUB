<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Gateway | Abid Khan Hub</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        :root {
            --primary-blue: #4fc3f7;
            --dark-bg: #07090d;
            --input-black: #000000; /* Pure Black for Inputs */
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: radial-gradient(circle at top right, #1a1c2c, #07090d);
            color: #fff;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 0;
        }

        .gateway-container {
            background: rgba(13, 17, 23, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 30px;
            overflow: hidden;
            width: 100%;
            max-width: 1150px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .form-side { 
            padding: 40px; 
            border-right: 1px solid var(--border); 
            max-height: 85vh; 
            overflow-y: auto; 
        }
        .form-side::-webkit-scrollbar { width: 6px; }
        .form-side::-webkit-scrollbar-thumb { background: var(--primary-blue); border-radius: 10px; }

        .preview-side { background: rgba(255,255,255,0.02); padding: 50px; text-align: center; }

        .master-label {
            font-size: 0.7rem;
            font-weight: 800;
            color: var(--primary-blue);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 5px;
            display: block;
        }

        /* MASTER THEME: BLACK BACKGROUND & WHITE TEXT FOR ALL FIELDS */
        .form-control, .form-select {
            background-color: var(--input-black) !important;
            border: 1px solid var(--border);
            color: #ffffff !important;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 15px;
            transition: 0.3s;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .form-control:focus, .form-select:focus {
            background-color: var(--input-black) !important;
            border-color: var(--primary-blue);
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.2);
            outline: none;
        }

        .form-select option { background: var(--input-black); color: white; }

        .virtual-id {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 320px;
            margin: 0 auto;
            position: relative;
        }

        .id-photo {
            width: 100px; height: 100px; border-radius: 50%;
            border: 3px solid var(--primary-blue);
            object-fit: cover; margin-bottom: 15px;
        }

        .btn-submit-hub {
            background: var(--primary-blue);
            color: #000; font-weight: 800; border: none;
            padding: 15px; border-radius: 12px; width: 100%;
            text-transform: uppercase; transition: 0.4s;
            margin-top: 10px;
        }

        .btn-submit-hub:hover { transform: translateY(-3px); background: #fff; box-shadow: 0 10px 20px rgba(79, 195, 247, 0.3); }
    </style>
</head>
<body>

<div class="gateway-container container">
    <div class="row g-0">
        <div class="col-lg-7 form-side">
            <div class="d-flex align-items-center mb-4">
                <img src="ABID KHAN.png" width="45" class="me-3">
                <div>
                    <h3 class="fw-bold mb-0">Hub Membership Gateway</h3>
                    <p class="text-secondary small mb-0">Complete your profile for IT & Islamic Excellence.</p>
                </div>
            </div>

            <form id="master-signup">
                <div class="row">
                    <div class="col-md-6">
                        <span class="master-label">Full Name</span>
                        <input type="text" id="name" class="form-control" placeholder="Student/Trainer Name" required>
                    </div>
                    <div class="col-md-6">
                        <span class="master-label">Email Address</span>
                        <input type="email" id="email" class="form-control" placeholder="name@hub.com" required>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <span class="master-label">Secure Password</span>
                        <input type="password" id="password" class="form-control" placeholder="••••••••" required>
                    </div>
                    <div class="col-md-6">
                        <span class="master-label">WhatsApp Number</span>
                        <input type="tel" id="phone" class="form-control" placeholder="+92 300 0000000" required>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <span class="master-label">Father's Name</span>
                        <input type="text" id="father_name" class="form-control" placeholder="Guardian Full Name">
                    </div>
                    <div class="col-md-6">
                        <span class="master-label">Monthly Income (EST)</span>
                        <input type="text" id="monthly_income" class="form-control" placeholder="e.g. 50,000 PKR">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <span class="master-label">Preferred Timing</span>
                        <input type="text" id="preferred_timing" class="form-control" placeholder="e.g. 6 PM - 8 PM">
                    </div>
                    <div class="col-md-6">
                        <span class="master-label">City / Location</span>
                        <input type="text" id="location" class="form-control" placeholder="Islamabad, PK">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <span class="master-label">Department</span>
                        <select id="course" class="form-select" required>
                            <option value="" disabled selected>Select Field</option>
                            <option value="IT">IT Engineering</option>
                            <option value="Islamic">Islamic Studies</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <span class="master-label">Your Goal</span>
                        <select id="role" class="form-select" required>
                            <option value="learn">I want to Learn (Student)</option>
                            <option value="teach">I want to Teach (Trainer)</option>
                        </select>
                    </div>
                </div>

                <button type="submit" class="btn-submit-hub">Activate My Hub Profile</button>
            </form>
        </div>

        <div class="col-lg-5 preview-side d-flex flex-column justify-content-center">
            <h5 class="fw-bold mb-4" style="letter-spacing: 2px; color: var(--primary-blue);">IDENTITY PREVIEW</h5>
            
            <div class="virtual-id" id="virtual-card">
                <img src="https://raw.githubusercontent.com/professionalabidkhan-hue/ABID-KHAN-/main/ABID%20KHAN.png" class="id-photo" id="preview-pic">
                <h3 id="preview-name" class="id-name" style="font-size: 1.4rem;">Member Name</h3>
                <p id="preview-role" class="id-role small text-info">Future Member</p>
                <hr style="opacity: 0.1;">
                
                <div class="text-start mt-3">
                    <div class="mb-2">
                        <small class="d-block text-secondary" style="font-size: 0.6rem;">DEPARTMENT</small>
                        <small id="preview-course" class="fw-bold text-white">---</small>
                    </div>
                    <div>
                        <small class="d-block text-secondary" style="font-size: 0.6rem;">LOCATION</small>
                        <small id="preview-location" class="fw-bold text-white">---</small>
                    </div>
                </div>
            </div>
            
            <p class="mt-4 text-secondary small">
                <i class="fas fa-lock me-1"></i> Your data is mapped directly to the Hub's Secure SQL Tables.
            </p>
        </div>
    </div>
</div>

</body>
<script>
    /**
     * MASTER ARCHITECT: ABID KHAN
     * PURPOSE: Sovereign Identity Registration & Oracle 19c Integration
     */

    // --- SECTION 1: DYNAMIC IDENTITY PREVIEW ---
    // Updates the Virtual ID Card in real-time to show the student's growing honor
    const inputMap = {
        'name': 'preview-name',
        'location': 'preview-location',
    };

    Object.keys(inputMap).forEach(id => {
        document.getElementById(id).addEventListener('input', (e) => {
            document.getElementById(inputMap[id]).innerText = e.target.value || (id === 'name' ? "Member Name" : "---");
        });
    });

    document.getElementById('course').addEventListener('change', (e) => {
        const text = e.target.options[e.target.selectedIndex].text;
        document.getElementById('preview-course').innerText = text;
    });

    document.getElementById('role').addEventListener('change', (e) => {
        const roleDisplay = document.getElementById('preview-role');
        roleDisplay.innerText = e.target.value === 'teach' ? "Expert Trainer" : "Future Member";
        roleDisplay.style.color = e.target.value === 'teach' ? "#4fc3f7" : "#0dcaf0";
    });


    // --- SECTION 2: THE SOVEREIGN SIGNUP STRIKE ---
    async function signupStrike(event) {
        // Prevent the "Silent Reload" (The ? at the end of the URL)
        if (event) event.preventDefault();
        
        console.log("SENTINEL: Strike Initialized by Master Abid Khan...");

        // Gather data from the High-Authority UI
        const signupData = {
            action: 'signup',
            full_name: document.getElementById('name').value.trim(),
            email: document.getElementById('email').value.trim(),
            password: document.getElementById('password').value,
            whatsapp_no: document.getElementById('phone').value.trim(),
            father_name: document.getElementById('father_name').value.trim(),
            monthly_income: document.getElementById('monthly_income').value.trim(),
            preferred_timing: document.getElementById('preferred_timing').value.trim(),
            location: document.getElementById('location').value.trim(),
            department: document.getElementById('course').value,
            role: document.getElementById('role').value
        };

        // Validate the Entrance
        if (!signupData.full_name || !signupData.email || !signupData.password) {
            alert("SENTINEL NOTICE: Name, Email, and Password are required for Vault entry.");
            return;
        }

        // Visual Feedback for the Founder
        const submitBtn = document.querySelector('.btn-submit-hub');
        const originalText = submitBtn.innerText;
        submitBtn.innerText = "SECURING IDENTITY...";
        submitBtn.disabled = true;

        try {
            // THE STRIKE TO THE ORACLE 19c BRIDGE
            // NOTE: Ensure your PHP server supports HTTPS for GitHub compatibility
            const response = await fetch('https://your-freesql-domain.com/connect_hub.php', {
                method: 'POST',
                headers: { 
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify(signupData)
            });

            if (!response.ok) throw new Error("Server communication failure.");

            const result = await response.json();

            if (result.success) {
                alert("TREMENDOUS SUCCESS: Your Identity has been sealed in the Oracle Vault!");
                // Clear Security Shadow and Proceed
                window.location.href = 'signin.html';
            } else {
                alert("VAULT REJECTION: " + (result.message || "Unknown error occurred."));
            }
        } catch (error) {
            console.error("Mastery Error Log:", error);
            alert("SENTINEL OFFLINE: The Bridge is blocked. Check HTTPS/CORS or Server Status.");
        } finally {
            submitBtn.innerText = originalText;
            submitBtn.disabled = false;
        }
    }

    // --- SECTION 3: PROTOCOL BINDING ---
    // Ensures the button obeys the script and not the default browser behavior
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('master-signup');
        const btn = document.querySelector('.btn-submit-hub');

        // Capture both the click and the "Enter" key strike
        form.addEventListener('submit', signupStrike);
        btn.type = "submit"; // Re-enable submit type now that preventDefault is active
    });
</script>
</html>
